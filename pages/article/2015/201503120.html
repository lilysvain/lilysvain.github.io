<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lily's lily - 我的文章</title>
    <base href="http://localhost:8080/">
    <meta name="keywords" content="个人主页,个人网站,前端,设计,电影,生活" />
    <meta name="description" content="Lily_Vain的个人主页，用于展示、记录、收集学习和生活中的美好的点滴。" />
    <meta name="author" content="Lily_Vain，狐二十三" />
    <link rel="Shortcut Icon" href="../../../liv.ico" />
    <link href="../../../static/style/article.css" rel="stylesheet" type="text/css" media="screen">
</head>
<body>




<footer class="top-fixed">
    <div class="top-content clearfix">
        <div class="top-logo">
            <a href="../../../" class="logo-pic">Lily's Lily</a>

        </div>
        <nav class="top-links">
            <ul class="line">
                <li><a href="../">文章</a></li>
                <li><a href="../../works/">作品</a></li>
                <li><a href="../../link">网址收集</a></li>
                <li><a href="../../message">留言</a></li>
            </ul>
        </nav>
    </div>
</footer>








<div class="main-container">
    <div class="content-wrapper clearfix">
        <div class="articles-header">
            <hgroup>
                <h1>Lily's Lily</h1>
                <!-- <h2>——我的文章</h2> -->
            </hgroup>

        </div>

        <div class="list-wrapper">
            <article class="a-complete">
                <time datetime="2015-03-12">
                    <span class="time-date">12.05</span><br/>
                    <span>Dec.</span><br/>
                    <span>2014</span>
                </time>
                <div class="a-detail">
                    <div class="a-label">Tag: &nbsp;<span>Web</span></div>
                    <h1 class="a-title">JavaScript Function</h1>
                    <div class="a-text">
                        <section>
                            <h1>1. 引用类型</h1>
                            <p>ECMAScript 中有5种基本数据类型：Undefined、Null、Boolean、Number 和 String，是简单的数据段。而引用类型值是指那些可由多个值构成的对象，保存在内存中，操作对象实际上是在操作对象的引用。</p>
                            <p>引用类型的值（对象）是引用类型的一个实例。引用类型也常被成为类，它们描述的是一类对象所具有的属性和方法。但尽管 ECMAScript 从技术上讲是一门面向对象的语言，但它不具备传统的面向对象语言所支持的类和接口等基本结构，称引用类型为类其实并不妥当。</p>
                            <p>ECMAScript 提供了很多原生引用类型（例如 Object，Array，Date，RegExp，Function），我们也可以创建自己的引用类型。</p>
                            <p>本文主要梳理一下 Function 相关的概念。</p>
                        </section>

                        <section>
                            <h1>2. 执行环境及作用域</h1>
                            <p>执行环境（execution context）定义了变量或函数有权访问的其他数据。每个执行环境都有一个与之关联的变量对象（variable object），环境中定义的所有变量和函数都保存在这个对象中。</p>
                            <p>每个函数都有自己的执行环境。当执行流进入一个函数时，函数的环境就会被推入一个环境栈中。而在函数执行之后，栈将其弹出，把控制权返回给之前的执行环境。</p>
                            <p>当代码在一个环境中执行时，会创建变量对象的一个作用域链（scope chain），保证对执行环境有权访问的所有变量和函数的有序访问。作用域的前端，始终是当前执行的代码所在环境的变量对象。如果这个环境是函数，则将其活动对象（activation object）作为变量对象。活动对象在最开始时只包含一个变量，即 arguments 对象。作用域中的下一个变量对象来自下一个包含环境，一直延续到全局执行环境。在 Web 浏览器中，全局执行环境被认为是 window 对象。</p>
                            <p>标识符解析就是沿着作用域链一级一级地搜索标识符的过程。</p>
                        </section>

                        <section>
                            <h1>3. Function 类型</h1>
                            <p>函数实际上是对象。每个函数都是 Function 类型的实例，函数名实际上也是一个指向函数对象的指针。</p>
                            <p>函数通常是使用函数声明语法定义的，如：</p>
<code>alert(sum(10,10));  //20
function sum (num1, num2) {
    return num1 + num2;
}
                            </code>
                            <p>Firefox、Safari、Chrome 和 Opera 都给函数定义了一个非标准的 name 属性，通过这个属性可以访问到函数声明中给函数指定的名字，例如上例中的"sum"。</p>
                            <p>也可以用函数表达式定义：</p>
<code>alert(sum(10,10));  //"unexpected identifier"
var sum = function(num1, num2){
    return num1 + num2;
};
                            </code>
                            <p>这种形式看起来好像是常规的变量赋值语句，创建一个匿名函数（anonymous function）并将它赋值给变量 sum。匿名函数的 name 属性是空字符串。</p>
                            <p>使用函数声明与函数表达式的区别的关键在于函数提升。解析器在向执行环境中加载数据时，会率先读取函数声明，并使其在执行任何代码之前可用（函数声明提升 function declaration hoisting）；而函数表达式，则必须等到解析器执行到它所在的代码行，才会真正被解释执行。见以上示例。</p>
                            <p>当然，使用 Function 构造函数也是可以的，最后一个参数会被看成是函数体：</p>
                            <code>var sum = new Function("num1", "num2", "return num1 + num2"); //not recommended</code>
                            <p>但这种语法会导致解析两次代码（第二次是解析传入构造函数中的字符串），从而影响性能，因为不推荐这种写法。</p>
                            <p>因为 ECMAScript 中的函数名本身就是变量，所以函数也可以作为值来使用，不仅可以像传递参数一样把一个函数传递给另一个函数，而且可以将一个函数作为另一个函数的结果返回。例如，假设有一个对象数组，我们想要根据某个对象属性对数组进行排序：</p>
<code>function createComparisonFunction(propertyName) {
    return function(object1, object2){
        var value1 = object1[propertyName];
        var value2 = object2[propertyName];
        if (value1 < value2){
            return -1;
        } else if (value1 > value2){
            return 1;
        } else {
            return 0;
        }
    };
}
var data = [{name: "Zachary", age: 28}, {name: "Nicholas", age: 29}];
data.sort(createComparisonFunction("name"));
alert(data[0].name); //Nicholas
                            </code>
                        </section>

                        <section>
                            <h1>4. this 和 arguments</h1>
                            <p>在函数内部，有两个特殊的对象：arguments 和 this。this 引用的是函数据以执行的环境对象（当在网页的全局作用域中调用函数时，this 对象引用的就是 window）：</p>
<code>window.color = "red";
var o = { color: "blue" };
function sayColor(){
    alert(this.color);
}
sayColor(); //"red"
o.sayColor = sayColor;
o.sayColor(); //"blue"
                            </code>
                            <p>理解 this 的含义非常重要。arguments 是一个类数组的结构，存储有传递给函数的参数。arguments 对象还有一个callee属性，arguments.callee是一个指向正在执行的函数的指针，可以用来实现对函数的递归调用，这种写法会比使用函数名更保险：</p>
<code>function factorial(num){
    if (num <= 1){
        return 1;
    } else {
        return num * arguments.callee(num-1);
    }
}
                            </code>
                            <p>但在严格模式下，不能通过脚本访问 arguments.callee，访问这个属性会导致错误。也可以使用命名函数表达式来达成相同的结果：</p>
<code>var factorial = (function f(num){
    if (num <= 1){
        return 1;
    } else {
        return num * f(num-1);
    }
});
                            </code>
                            <p>即使把函数赋值给了另一个变量，函数的名字 f 仍然有效，递归调用照样能正确完成。</p>
                        </section>

                        <section>
                            <h1>5. apply() 和 call() 方法</h1>
                            <p>每个函数都包含两个方法：apply() 和 call()，这两个方法的用途都是在特定的作用域中调用函数，实际上等于设置函数体内 this 对象的值。</p>
<code>function sum(num1, num2){
    return num1 + num2;
}
function callSum1(num1, num2){
    return sum.apply(this, arguments); //passing in arguments object
}
function callSum2(num1, num2){
    return sum.apply(this, [num1, num2]); //passing in array
}

return sum.call(this, num1, num2);
                            </code>
                            <p>apply() 方法的第二个参数可以是 Array 的实例，也可以是 arguments 对象。call() 方法的区别在于传递给函数的参数必须逐个列举出来。</p>
                            <p>apply() 和 call() 真正的用武之地是能够扩充函数赖以运行的作用域。</p>
                        </section>

                        <section>
                            <h1>6. 闭包</h1>
                            <p></p>
                        </section>




                    </div><!--div.a-text -->


                </div>
            </article>

            <!-- 显示文章评论 -->
            <section class="a-comment">
                <h1 class="comment-title">最新评论.</h1>
                <p>该文章目前没有任何评论！</p>

                <!-- 实现发表评论界面 -->
                <form action="ArtReview" method="post" class="comm-form">
                    <fieldset>
                        <legend>发表评论</legend>
                        <input name="action" value="review" type="hidden">
                        <input name="rootId" value="15" type="hidden">
                        <label for="revname">Name:</label>
                        <input id="revname" name="revName" type="text" placeholder="昵称请不要多于10个字">
                        <textarea name="artRContent" class="artRContent"></textarea>
                        <input value="发表评论" type="submit" class="comm-submit">
                    </fieldset>
                </form>
            </section>
        </div><!-- div.list-wrapper -->


        <aside>
            <section>
                <h1><span>导航</span></h1>
                <ul>
                    <li class="cata-single"><a href="../../../">首页</a></li>
                    <li class="cata-single"><a href="../">文章</a></li>
                    <li class="cata-single"><a href="../../works/">作品</a></li>
                    <li class="cata-single"><a href="../../link">链接</a></li>
                    <li class="cata-single"><a href="../../message">留言</a></li>
                </ul>
            </section>
            <section>
                <h1><span>分类</span></h1>
                <ul>
                    <li class="cata-single"><a href="">前端</a></li>
                    <li class="cata-single"><a href="">绘画</a></li>
                    <li class="cata-single"><a href="">数据库</a></li>
                    <li class="cata-single"><a href="">读书笔记</a></li>
                </ul>
            </section>
        </aside>
    </div><!-- div.content-wrapper -->
</div>



<footer class="bottom-footer">
    <ul class="line">
        <li>Copyright &copy; 2012-2015</li>
        <li>鄂ICP备12010152号-1</li>
        <li><a href="">联系我</a></li>
    </ul>
</footer>
</body>
</html>